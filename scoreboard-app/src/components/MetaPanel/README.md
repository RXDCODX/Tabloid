# MetaPanel - Управление мета-информацией турнира

## Описание

Компонент `MetaPanel` позволяет управлять мета-информацией турнира, включая название турнира и режим драки. Компонент интегрирован с SignalR для синхронизации данных между всеми подключенными клиентами.

## Функциональность

### Основные возможности:
- **Название турнира**: Текстовое поле для ввода названия турнира
- **Режим драки**: Выбор из предустановленных вариантов или кастомный ввод
- **Синхронизация**: Автоматическая синхронизация с другими клиентами
- **Компактный дизайн**: Оптимизирован для размещения в один ряд с VisibilityCard
- **Вертикальная компоновка**: Элементы расположены в столбик для компактности

### Режимы драки:

#### **Предустановленные варианты:**
- **FT1** - First to 1
- **FT2** - First to 2  
- **FT3** - First to 3
- **FT4** - First to 4
- **FT5** - First to 5

#### **Специальные варианты:**
- **None** - Без режима драки (отдельный ряд)
- **Custom** - Кастомный режим с текстовым вводом

### Состояния кнопок:
- **Активный режим**: Синяя кнопка с белым текстом
- **Неактивный режим**: Прозрачная кнопка с синей рамкой
- **None**: Серая кнопка для отключения режима драки
- **Custom**: Синяя кнопка для кастомного ввода

## Использование

```tsx
import MetaPanel from './MetaPanel';
import { useAdminState } from './useAdminState';

const AdminPanel = () => {
  const { meta, setMeta } = useAdminState();
  
  return (
    <Row className="mb-4">
      <Col xs={12} md={6} lg={6}>
        <VisibilityCard isVisible={isVisible} onVisibilityChange={setVisibility} />
      </Col>
      <Col xs={12} md={6} lg={6}>
        <MetaPanel setMeta={setMeta} meta={meta} />
      </Col>
    </Row>
  );
};
```

## Стилизация

Компонент использует:
- **Цветовая схема**: Фиолетовый (#6f42c1) для основного дизайна
- **Иконки**: InfoCircle из react-bootstrap-icons (размер 20px)
- **Анимации**: CSS transitions для плавных переходов
- **Адаптивность**: Responsive дизайн с Bootstrap классами
- **Компактность**: Уменьшенные размеры для размещения в один ряд
- **Выравнивание**: Высота 100% для выравнивания с VisibilityCard

### Размеры:
- **Иконки**: 20px
- **Заголовок**: 14px
- **Лейблы**: 12px
- **Поля ввода**: 14px
- **Кнопки режимов**: 12px
- **Кастомное поле**: 12px

### Цвета:
- **Основной**: Фиолетовый (#6f42c1)
- **Кнопки режимов**: Синий (#0d6efd)
- **Кнопка None**: Серый (#6c757d)
- **Кастомное поле**: Желтый (#ffc107)
- **Текст**: Белый (#ffffff)

## Структура компонента

### Компоновка:
1. **Заголовок**: Иконка и текст "Meta Panel" (верх)
2. **Название турнира**: Текстовое поле (центр)
3. **Режим драки**: 
   - Предустановленные варианты (FT1-FT5) в одном ряду
   - Кнопка "None" в отдельном ряду
   - Кнопка "Custom" с текстовым полем (при необходимости)

### Логика работы:

#### **Обработка выбора режима:**
```typescript
const handleFightRuleChange = (rule: string) => {
  setMeta({ fightRule: rule });
  if (fightRules.includes(rule) || rule === "None") {
    setCustomFightRule(""); // сбрасываем customFightRule
  } else {
    setCustomFightRule(rule);
  }
};
```

#### **Условия отображения Custom поля:**
```typescript
{(meta.fightRule === "Custom" ||
  (!fightRules.includes(meta.fightRule) && meta.fightRule !== "None")) && (
  <Form.Control
    type="text"
    placeholder="Кастомный режим (например: FT10, BO3)"
    value={customFightRule || ""}
    onChange={(e) => {
      setCustomFightRule(e.target.value);
      setMeta({ fightRule: e.target.value });
    }}
  />
)}
```

## Интеграция с бекендом

### SignalR методы:
- `UpdateMeta(MetaInfo meta)` - обновление мета-информации
- `ReceiveState` - получение обновленного состояния от сервера

### Сохранение состояния:
- Состояние сохраняется в `config.ini` в секции `[Scoreboard]`
- Ключи: `Title`, `FightRule`
- Автоматическая загрузка при старте приложения

## Особенности дизайна

### Кнопка "None":
- **Расположение**: Отдельный ряд под предустановленными вариантами
- **Цвет**: Серый (#6c757d) для визуального отличия
- **Функция**: Отключает режим драки
- **Ширина**: Полная ширина контейнера

### Кастомное поле:
- **Отображение**: Только при выборе "Custom" или вводе нестандартного значения
- **Цвет**: Желтый (#ffc107) для выделения
- **Плейсхолдер**: "Кастомный режим (например: FT10, BO3)"
- **Валидация**: Автоматическое обновление при вводе

## Адаптивность

- **xs (мобильные)**: Полная ширина (12 колонок)
- **md (планшеты)**: 6 колонок из 12
- **lg (десктоп)**: 6 колонок из 12
- **Высота**: Автоматически выравнивается с VisibilityCard

## Валидация и обработка ошибок

- **Пустые значения**: Разрешены для названия турнира
- **Специальные символы**: Поддерживаются в кастомном режиме
- **Длина текста**: Не ограничена
- **Синхронизация**: Автоматическая при изменении любого поля

## Преимущества

- **Интуитивность**: Понятный интерфейс с логичной группировкой
- **Гибкость**: Поддержка как стандартных, так и кастомных режимов
- **Компактность**: Эффективное использование пространства
- **Синхронизация**: Реальное время обновления между клиентами
- **Визуальная иерархия**: Четкое разделение различных типов опций 